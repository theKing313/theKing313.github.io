(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7635:function(e,t,r){Promise.resolve().then(r.bind(r,2285))},2285:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P},metadata:function(){return E}});var a=r(7437),i=r(7190),s=r(2265),l=r(4949),n=r(6061),d=r(7042),c=r(3986);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,c.m)((0,d.W)(t))}let u=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=s.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:n=!1,...d}=e,c=n?l.g7:"button";return(0,a.jsx)(c,{className:o(u({variant:i,size:s,className:r})),ref:t,...d})});f.displayName="Button";var m=r(643);function p(e){var t;let{id:r,title:s,price:l}=e,n=(0,i.I0)(),d=(0,i.v9)(e=>e.product.productsCarts),c=(0,i.v9)(e=>e.product.cartQuantity),o=(null===(t=d.find(e=>e.id===r))||void 0===t?void 0:t.quantity)||0;return(0,a.jsx)("div",{className:"".concat(r),children:(0,a.jsxs)("div",{className:"w-full h-full p-1 md:p-9 flex flex-col gap-y-7",children:[(0,a.jsx)("img",{alt:"gallery",className:"block h-full w-full rounded-lg object-cover object-center",src:"https://tecdn.b-cdn.net/img/Photos/Horizontal/Nature/4-col/img%20(73).webp"}),(0,a.jsxs)("div",{children:[s," "]}),(0,a.jsxs)("div",{className:"",children:["$",l]}),0!=o?(0,a.jsxs)("div",{className:"w-full flex justify-around items-center",children:[(0,a.jsx)(f,{onClick:()=>{n((0,m.tr)({id:r,title:s,price:l,quantity:c}))},children:"-"}),(0,a.jsx)("div",{className:"",children:"Add to cart"}),(0,a.jsx)(f,{onClick:()=>{n((0,m.Xq)({id:r,title:s,price:l,quantity:c}))},children:"+"})," "]}):(0,a.jsx)(f,{variant:"outline",onClick:()=>{n((0,m.Xq)({id:r,title:s,price:l,quantity:c}))},children:"Add to carte"})]})},r)}function x(){let[e,t]=(0,s.useState)(),r=(0,i.I0)();(0,s.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("product"));e||r((0,m.Dg)()),t(e)},[]);let l=(0,i.v9)(e=>e.product.status);return(0,a.jsx)("section",{className:"",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"pl-5 pb-4",children:"PRODUCTS"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"flex space-x-4 pb-4",children:(0,a.jsx)("div",{className:"container mx-auto px-5 py-2 lg:px-32 lg:pt-12",children:(0,a.jsx)("div",{className:"flex flex-col md:grid md:grid-cols-3",children:"loading"!==l&&(null==e?void 0:e.carts[0].products.map(e=>(0,s.createElement)(p,{...e,key:e.id})))})})})})]})})}var h=r(1908);let v=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(h.fC,{ref:t,className:o("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...i})});v.displayName=h.fC.displayName;let y=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(h.Ee,{ref:t,className:o("aspect-square h-full w-full",r),...i})});y.displayName=h.Ee.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(h.NY,{ref:t,className:o("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...i})});g.displayName=h.NY.displayName;var j=r(227),N=r(6974),b=r(7106),C=r(9222);function w(){let e=(0,N.useStripe)(),t=(0,N.useElements)(),r=null==t?void 0:t.getElement("card"),s=(0,i.v9)(e=>e.product.totalPriceUser),l=async t=>{t.preventDefault();try{if(!e||!r)return null;let{data:t}=await C.Z.post("/api/",{data:{amount:s}});await (null==e?void 0:e.confirmCardPayment(t,{payment_method:{card:r}}))}catch(e){console.log(e)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("form",{onSubmit:l,children:[(0,a.jsx)(N.CardElement,{}),(0,a.jsx)(f,{className:"w-full mt-3",type:"submit",children:"Оплата"})]})})}let k=(0,b.J)("pk_test_51Nm9IQLRWAD1wBbd2ik5DkxwNZGL4PetCG6pafJdWV5IqxemwFu2WEPZF0WLYwoi4x6XeGQYbH6dAYMEC36kRpBc00Y5C5TAyi");function q(){let e=(0,i.v9)(e=>e.product.productsCarts),t=(0,i.I0)(),[r,l]=(0,s.useState)(!1);return(0,i.v9)(e=>e.product.cartQuantity),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex flex-col md:flex",children:(0,a.jsx)("div",{className:"border-b",children:(0,a.jsx)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,a.jsx)("div",{className:"hidden md:flex",children:"LOGO"}),(0,a.jsxs)("div",{className:" w-full justify-between md:justify-end relative flex items-center space-x-2 gap-x-3",children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(y,{src:"https://github.com/shadcn.png",alt:"@shadcn"}),(0,a.jsx)(g,{children:"CN"})]}),r&&(0,a.jsx)("div",{className:"absolute z-20 md:right-6 md:top-20 top-20 right-0 ",children:(0,a.jsxs)("div",{className:"rounded-sm h-full max-w-[400px] bg-slate-700 flex flex-col gap-y-7",children:[null==e?void 0:e.map(e=>0!==e.quantity&&(0,a.jsxs)("div",{className:"p-5 md:p-6 flex justify-center flex-col items-center h-[90%] w-[90%] m-auto",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)("img",{className:"max-w-full h-full object-cover rounded-sm",src:"https://tecdn.b-cdn.net/img/Photos/Horizontal/Nature/4-col/img%20(73).webp",alt:""})}),(0,a.jsx)("div",{className:"text-xs",children:null==e?void 0:e.title}),(0,a.jsx)("div",{className:"",children:e.quantity})]},e.id)),(0,a.jsxs)("div",{className:"total",children:["Total price :   $",null==e?void 0:e.reduce((t,r)=>{let a=e.find(e=>r.id===e.id),i=Math.trunc(t+((null==a?void 0:a.price)||0)*r.quantity);return i},0)]}),(0,a.jsxs)("div",{className:"",children:["USD Coin :",null==e?void 0:e.reduce((t,r)=>{let a=e.find(e=>r.id===e.id),i=Math.trunc(t+((null==a?void 0:a.price)||0)*r.quantity);return 1*i},0)]}),(0,a.jsx)(N.Elements,{stripe:k,children:(0,a.jsx)(w,{})}),e&&(0,a.jsx)(f,{className:"bg-red-500",onClick:()=>t((0,m.LL)()),children:"clearCart"})]})}),(0,a.jsxs)(f,{className:"text-slate-400 text-3xl relative bg-inherit h-full rounded-full",onClick:()=>l(!r),children:[(0,a.jsx)(j.K3l,{}),(0,a.jsx)("div",{className:"absolute left-12 bottom-7 text-[#DA00FE] text-sm font-medium rounded-full bg-white w-4 h-4 flex items-center justify-center"})]})]})]})})})})})}function P(){let e=(0,i.v9)(e=>e.product.status);return(0,a.jsx)(a.Fragment,{children:"loading"!==e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{}),(0,a.jsxs)("main",{className:"py-5",children:[(0,a.jsx)(x,{}),(0,a.jsx)("div",{})]})]})})}let E={title:"Redux Toolkit"}},643:function(e,t,r){"use strict";r.d(t,{Dg:function(){return s},LL:function(){return c},Xq:function(){return d},tr:function(){return o}});var a=r(663),i=r(9222);let s=(0,a.hg)("get/product",async(e,t)=>{try{let e=await i.Z.get("https://dummyjson.com/carts");return e.data&&(localStorage.setItem("product",JSON.stringify(e.data)),console.log(e.data)),e.data}catch(e){return t.rejectWithValue("error with createAsyncThunk ) ".concat(e," "))}}),l=(0,a.oM)({name:"product",initialState:{carts:[],productsCarts:[],status:"idle",totalPriceUser:0,cartQuantity:0},reducers:{reset:e=>{e.status="loading"},decreaseCartQuantity:(e,t)=>{var r;if(e.productsCarts.find(e=>e.id===t.payload.id)){let r=e.productsCarts.map(e=>{if(e.id!==t.payload.id)return{...e};{let t=e.quantity-1,r=t*e.price;return{...e,quantity:t,totalPrice:r}}});e.productsCarts=r,e.productsCarts.filter(e=>0!==e.quantity)}else console.log(t.payload),t.payload.quantity=1,e.productsCarts.push(t.payload);e.cartQuantity=null===(r=e.productsCarts)||void 0===r?void 0:r.reduce((e,t)=>t.quantity+e,0)},addToCart:(e,t)=>{var r,a;if(e.productsCarts.find(e=>e.id===t.payload.id)){let r=e.productsCarts.map(e=>{if(e.id!==t.payload.id)return{...e};{let t=e.quantity+1,r=t*e.price;return{...e,quantity:t,totalPrice:r}}});e.productsCarts=r}else t.payload.quantity=1,e.productsCarts.push(t.payload);e.cartQuantity=null===(r=e.productsCarts)||void 0===r?void 0:r.reduce((e,t)=>t.quantity+e,0),e.totalPriceUser=null===(a=e.productsCarts)||void 0===a?void 0:a.reduce((t,r)=>{let a=e.productsCarts.find(e=>r.id===e.id),i=Math.trunc(t+((null==a?void 0:a.price)||0)*r.quantity);return i},0)},clearCart:e=>{e.productsCarts=[],e.cartQuantity=0,e.totalPriceUser=0},getUserPayment:(e,t)=>{e.totalPriceUser=t.payload}},extraReducers:{[s.pending.toString()]:(e,t)=>{e.status="loading"},[s.fulfilled.toString()]:(e,t)=>{e.status="idle"}}}),{reset:n,addToCart:d,clearCart:c,decreaseCartQuantity:o,getUserPayment:u}=l.actions;t.ZP=l.reducer},7190:function(e,t,r){"use strict";r.d(t,{I0:function(){return m},tO:function(){return f},v9:function(){return p}});var a=r(1267),i=r(1850),s=r(7373),l=r(663),n=r(3198),d=r(643);let c={key:"root",version:1,storage:i.Z},o=(0,s.UY)({product:d.ZP}),u=(0,a.OJ)(c,o),f=(0,l.xC)({reducer:u,middleware:e=>e({serializableCheck:{ignoredActions:[a._P,a.I2,a.E7,a.ex,a.e,a.Nz]}})});(0,a.p5)(f);let m=()=>(0,n.I0)(),p=n.v9}},function(e){e.O(0,[99,401,177,971,596,744],function(){return e(e.s=7635)}),_N_E=e.O()}]);